(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],m=0,d=[];m<o.length;m++)i=o[m],n[i]&&d.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={index:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("9291")},1574:function(t,e,a){"use strict";var s=a("eca6"),n=a.n(s);n.a},2880:function(t,e,a){"use strict";var s=a("83d8"),n=a.n(s);n.a},"393e":function(t,e,a){},"3e0c":function(t,e,a){"use strict";var s=a("5cb4"),n=a.n(s);n.a},"3ede":function(t,e,a){"use strict";var s=a("7ecd"),n=a.n(s);n.a},"3f66":function(t,e,a){"use strict";var s=a("b34e"),n=a.n(s);n.a},"4cf1":function(t,e,a){},5358:function(t,e,a){},"5aea":function(t,e,a){},"5cb4":function(t,e,a){},"639d":function(t,e,a){},7578:function(t,e,a){"use strict";var s=a("4cf1"),n=a.n(s);n.a},"7b49":function(t,e,a){"use strict";var s=a("393e"),n=a.n(s);n.a},"7ecd":function(t,e,a){},"83cb":function(t,e,a){"use strict";var s=a("5358"),n=a.n(s);n.a},"83d8":function(t,e,a){},9291:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=a("5c96"),r=a.n(n),i=(a("0fae"),a("6625")),o=a.n(i),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},l=[],u={},m=u,d=a("2877"),p=Object(d["a"])(m,c,l,!1,null,null,null),f=p.exports,h=(a("5aea"),a("8c4f")),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Map",{staticClass:"map",attrs:{shopList:t.list,height:700,width:1190}})],1)},_=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-map",style:{width:t.width+"px",height:t.height+"px",margin:"34rpx auto"},attrs:{id:t.id}})},b=[],w=(a("7f7f"),a("6b54"),a("06db"),a("c5f6"),a("5118"),{props:{width:{type:Number,default:300},height:{type:Number,default:300},point:{type:Array,default:function(){return[113.95014,22.58557]}},shopList:{type:Array,default:function(){return[]}}},data:function(){return{id:"map",key:"b366873e9dc6e3e0dce51b91d487d372"}},watch:{point:function(t,e){this.map.setCenter(t),this.marker.setPosition(t),this.map.add(marker)},shopList:function(t,e){this.Map(t)}},created:function(){this.Map([])},methods:{Map:function(t){var e=this,a=this;a.id="map".concat(Math.random().toString().slice(4,6)),window.onmaploaded=function(){var s=new window.AMap.Map(a.id,{resizeEnable:!0,center:a.point,zoom:18});a.map=s,e.addMarker(t)};var s="https://webapi.amap.com/maps?v=1.4.14&key=".concat(a.key,"&callback=onmaploaded"),n=document.createElement("script");n.charset="utf-8",n.src=s,document.head.appendChild(n)},addMarker:function(t){var e=this,a=this;this.map.clearMap();for(var s=t,n=[],r=[],i=function(t){n[t]=new window.AMap.Marker({map:a.map,position:s[t].position}),e.map.add(n),AMap.event.addListener(n[t],"click",function(){r[t]="".concat(s[t].name,'<span style="font-size:11px;color:#F00;">价格:').concat(s[t].price,"</span>");var e=[];e.push('<img style="height:66px;width:100px" src=\''.concat(s[t].img,"'>地址：").concat(s[t].address)),e.push("电话：".concat(s[t].tel)),e.push("<a href='/detail?id=".concat(s[t].id,"'>详细信息</a>"));var i=new window.AMap.InfoWindow({isCustom:!0,content:a.createInfoWindow(r[t],e.join("<br/>")),offset:new window.AMap.Pixel(16,-45)});i.open(a.map,n[t].getPosition())})},o=0;o<s.length;o++)i(o)},createInfoWindow:function(t,e){var a=this,s=document.createElement("div");s.className="custom-info input-card content-window-card";var n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("img");n.className="info-top",r.innerHTML=t,i.src="https://webapi.amap.com/images/close2.gif",i.onclick=a.closeInfoWindow,n.appendChild(r),n.appendChild(i),s.appendChild(n);var o=document.createElement("div");o.className="info-middle",o.style.backgroundColor="white",o.innerHTML=e,s.appendChild(o);var c=document.createElement("div");c.className="info-bottom",c.style.position="relative",c.style.top="0px",c.style.margin="0 auto";var l=document.createElement("img");return l.src="https://webapi.amap.com/images/sharp.png",c.appendChild(l),s.appendChild(c),s},closeInfoWindow:function(){this.map.clearInfoWindow()}}}),y=w,C=(a("83cb"),Object(d["a"])(y,g,b,!1,null,null,null)),x=C.exports,k={data:function(){return{list:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.$http.post("http://jox.ngrok.xiaomiqiu.cn/api/shop_list",{keyword:""}).then(function(e){var a=e.data,s=a.code,n=a.shop_list;a.msg;0===s&&n&&(t.list=n.map(function(t){return t.position=[t.lng,t.lat],t}))})}},components:{Map:x}},$=k,F=(a("2880"),Object(d["a"])($,v,_,!1,null,"1cc9ba87",null)),S=F.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"m-products-list"},[a("dl",t._l(t.nav,function(e,s){return a("dd",{key:e.name,class:[e.name,s==t.key?"s-nav-active":""],on:{click:function(e){return t.navSelect(s)}}},[t._v(t._s(e.txt))])}),0),a("ul",t._l(t.list,function(t,e){return a("Item",{key:e,attrs:{meta:t}})}),1),0==t.list.length?a("div",{staticClass:"no-message"},[t._v("无匹配数据")]):t._e()])])},j=[],O=(a("55dd"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dl",{staticClass:"s-item"},[a("dt",[a("img",{attrs:{src:t.meta.img,alt:"商品图片"}})]),a("dd",[a("h3",[a("a",{attrs:{href:"/detail?id="+t.meta.id}},[t._v(t._s(t.meta.name))])]),a("el-rate",{attrs:{colors:["#ff9900","#ff9900","#FF9900"],disabled:""},model:{value:t.meta.rate,callback:function(e){t.$set(t.meta,"rate",e)},expression:"meta.rate"}}),t.meta.rate>4?a("span",{staticClass:"s-item-comment"},[t._v("很好")]):t.meta.rate>3?a("span",{staticClass:"s-item-comment"},[t._v("一般")]):a("span",{staticClass:"s-item-comment"},[t._v("很差")]),a("span",{staticClass:"s-item-value"},[t._v(t._s(t.meta.rate)+"分")]),a("span",{staticClass:"s-item-comment-total"},[t._v(t._s(t.meta.comment)+"人评论")]),a("p",[a("span",{staticClass:"s-item-type"},[t._v(t._s(t.meta.type))]),a("span",{staticClass:"s-item-addr"},[t._v(t._s(t.meta.addr))])]),a("p",[a("em",{staticClass:"s-item-price"},[t._v("￥"+t._s(t.meta.price)+"起")]),a("b",[t._v(t._s(t.meta.status))])]),a("ul",[t.meta.scene&&t.meta.scene.length?a("li",[a("span",{staticClass:"detail-type"},[t._v("景酒")]),t._v(t._s(t.meta.scene)+"\n      ")]):a("li",[a("span",{staticClass:"detail-type"},[t._v("景酒")]),t._v("暂无描述\n      ")])])],1)])}),E=[],I={props:{meta:{type:Object,default:function(){return{}}}}},L=I,N=(a("3f66"),Object(d["a"])(L,O,E,!1,null,null,null)),P=N.exports,R={data:function(){return{list:[],key:0,nav:[{name:"s-price",txt:"价格最低",active:!0},{name:"s-comment",txt:"评价最高",active:!1}]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.$http.post("http://jox.ngrok.xiaomiqiu.cn/api/shop_list",{keyword:this.$route.query.keyword}).then(function(e){var a=e.data,s=a.code,n=a.shop_list,r=a.msg;0===s&&n?t.list=n.sort(function(t,e){return t.price-e.price}):t.$message.error(r)})},navSelect:function(t){this.key=t,0!=t?1==t&&(this.list=this.list.sort(function(t,e){return e.rate-t.rate})):this.list=this.list.sort(function(t,e){return t.price-e.price})}},components:{Item:P}},T=R,U=(a("3ede"),Object(d["a"])(T,M,j,!1,null,"170e1d94",null)),q=U.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-detail"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("crumbs",{attrs:{keyword:t.keyword,type:t.type}})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("summa",{attrs:{meta:t.product}})],1)],1),a("el-row",{staticClass:"m-title"},[a("el-col",{attrs:{span:24}},[a("h3",[t._v("商家菜单")])])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("list",{attrs:{list:t.food_list}})],1)],1),a("el-row",{staticClass:"m-title"},[a("el-col",{attrs:{span:24}},[a("h3",[t._v("精选评论")])])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"commen-wrap"},[t._l(t.comment_list,function(e,s){return a("div",{key:s,staticClass:"commen-box"},[a("h1",[t._v(t._s(e.username))]),a("p",{staticClass:"date"},[t._v(" "+t._s(e.create_time))]),a("div",{staticClass:"center"},[a("span",{staticClass:"text"},[t._v("打分")]),a("el-rate",{staticStyle:{"font-size":"10px"},attrs:{disabled:"","show-score":"","text-color":"#ff9900"},model:{value:e.rate,callback:function(a){t.$set(e,"rate",a)},expression:"item.rate"}})],1),a("p",[t._v(t._s(e.comment_text))])])}),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入评论"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-rate",{staticStyle:{margin:"20px 0"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("评论")])],2)])],1)],1)},z=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-crumbs"},[a("el-breadcrumb",{attrs:{separator:">"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("美食地图")]),a("el-breadcrumb-item",[t._v(t._s(decodeURIComponent(t.keyword)))])],1)],1)},G=[],H={props:{keyword:{type:String,default:""},type:{type:String,default:""}},data:function(){return{position:{city:"深圳"}}}},J=H,B=Object(d["a"])(J,W,G,!1,null,null,null),D=B.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dl",{staticClass:"m-sum-card"},[a("dt",[a("h1",[t._v(t._s(t.meta.name))]),a("el-rate",{attrs:{disabled:""},model:{value:t.meta.rate,callback:function(e){t.$set(t.meta,"rate",e)},expression:"meta.rate"}}),a("span",[t._v(t._s(Number(t.meta.rate))+"分")]),a("span",[t._v("人均￥"+t._s(Number(t.meta.cost)))]),a("ul",[a("li",{on:{click:function(e){return t.openMap(t.meta.location)}}},[t._v("地址："+t._s(t.meta.address))]),a("li",[t._v("电话："+t._s(t.meta.tel))])])],1),a("dd",[a("el-carousel",{attrs:{height:"214px","indicator-position":"none"}},[a("el-carousel-item",[a("h3",[a("img",{attrs:{src:t.meta.img,alt:"item.title",width:"100%",height:"100%"}})])])],1)],1)])},Q=[],V={props:{meta:{type:Object,default:function(){return{}}}},data:function(){return{sale:70+Math.floor(300*Math.random())}},computed:{},methods:{openMap:function(t){}}},X=V,Y=Object(d["a"])(X,K,Q,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-detail-list"},[a("ul",[a("li",[t._v(t._s(t.list.length)+"款菜品")]),t._l(t.list,function(t,e){return a("item",{key:e,attrs:{meta:t}})})],2)])},et=[],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"m-detail-item"},[a("dl",{staticClass:"section"},[a("dd",[a("img",{attrs:{src:t.meta.img}})]),a("dd",[a("h4",[t._v(t._s(t.meta.name))]),a("p"),a("p",[a("span",{staticClass:"price"},[t._v(t._s(t.meta.price))]),a("sub",[t._v("门店价"+t._s(t.meta.price))])])]),a("dd",[a("el-button",{attrs:{type:"warning",round:""},on:{click:t.createCart}},[t._v("立即抢购")])],1)])])},st=[],nt={props:{meta:{type:Object,default:function(){return{}}}},methods:{createCart:function(){}}},rt=nt,it=Object(d["a"])(rt,at,st,!1,null,null,null),ot=it.exports,ct={components:{Item:ot},props:{list:{type:Array,default:function(){return[]}}}},lt=ct,ut=Object(d["a"])(lt,tt,et,!1,null,null,null),mt=ut.exports,dt={data:function(){return{value1:0,textarea:"",keyword:"",type:"",product:{},food_list:[],comment_list:[]}},created:function(){this.getInfo(),this.getComments(),this.getFoods()},methods:{getInfo:function(){var t=this;this.$http.post("shop_inf",{shop_id:1}).then(function(e){var a=e.data,s=a.code,n=a.shop_inf;0==s&&n&&(t.product=n)})},getComments:function(){var t=this;this.$http.post("comment_list",{shop_id:1}).then(function(e){var a=e.data,s=a.code,n=a.comment_list;0==s&&n&&(t.comment_list=n)})},getFoods:function(){var t=this;this.$http.post("food_list",{shop_id:1}).then(function(e){var a=e.data,s=a.code,n=a.food_list;0==s&&n&&(t.food_list=n)})},submit:function(){var t=this;""!=this.textarea?0!=this.value1?this.$http.post("add_comment",{text:this.textarea,rate:this.value1,shop_id:1}).then(function(e){var a=e.data,s=a.code,n=a.msg;0===s?(t.$message.success("评论成功"),t.getComments()):1004===s?t.$confirm("清先登陆再评论","提示",{confirmButtonText:"立刻登陆",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push("/login")}).catch(function(){}):t.$message.error(n)}):this.$message.warning("请评分"):this.$message.warning("请输入评论")}},components:{Crumbs:D,Summa:Z,List:mt}},pt=dt,ft=(a("f8df"),Object(d["a"])(pt,A,z,!1,null,null,null)),ht=ft.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"layout-default"},[a("el-header",{attrs:{height:"120px"}},[a("my-header")],1),a("el-main",[a("router-view")],1),a("el-footer",{attrs:{height:"100px"}},[a("Footer")],1)],1)},_t=[],gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-panel"},[s("el-row",{staticClass:"m-header-searchbar",attrs:{type:"flex",justify:"space-around"}},[s("el-col",{staticClass:"left"},[s("a",{attrs:{href:"/"}},[s("img",{attrs:{src:a("dd88"),alt:"美团"}})])]),s("el-col",{staticClass:"center"},[s("div",{staticClass:"wrapper"},[s("el-input",{attrs:{placeholder:"搜索商家或地点"},on:{focus:t.focus,blur:t.blur,input:t.input},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("button",{staticClass:"el-button el-button--primary",on:{click:t.toSearch}},[s("i",{staticClass:"el-icon-search"})]),t.isHotPlace?s("dl",{staticClass:"hotPlace"},[s("dt",[t._v("热门搜索")]),t._l(t.list,function(e,a){return s("dd",{key:a},[s("a",{attrs:{href:"/products?keyword="+encodeURIComponent(e.name)}},[t._v(t._s(e.name))])])})],2):t._e(),t.isSearchList?s("dl",{staticClass:"searchList"},t._l(t.searchList,function(e,a){return s("dd",{key:a},[s("a",{attrs:{href:"/products?keyword="+encodeURIComponent(e.name)}},[t._v(t._s(e.name))])])}),0):t._e()],1),s("p",{staticClass:"suggest"},t._l(t.searchList,function(e,a){return s("a",{key:a,attrs:{href:"/products?keyword="+encodeURIComponent(e)}},[t._v(t._s(e))])}),0)]),s("el-col",{staticClass:"right"},[t.userName?s("p",{on:{click:t.exit}},[s("span",{staticClass:"username"},[t._v("欢迎您,"+t._s(t.userName))]),s("span",{staticClass:"exit-box"},[t._v("["),s("span",{staticClass:"exit"},[t._v("退出")]),t._v("]")])]):s("p",[s("a",{staticClass:"login",attrs:{href:"/register"}},[t._v("注册")]),s("a",{staticClass:"login",attrs:{href:"/login"}},[t._v("登陆")])])])],1)],1)},bt=[],wt=(a("386d"),{data:function(){return{search:"",isFocus:!1,hotPlace:[],searchList:[],userName:null,list:[]}},computed:{isHotPlace:function(){return this.isFocus&&!this.search},isSearchList:function(){return this.isFocus&&this.search}},components:{},created:function(){var t=this.$Store.localGet("history")||[];this.searchList=t.slice(-5),this.getUser(),this.getList()},methods:{toSearch:function(){var t=this.$Store.localGet("history")||[];t.push(this.search),this.$Store.localSet("history",t),location.href="/products?keyword=".concat(this.search)},focus:function(){this.isFocus=!0},exit:function(){this.userName=null,this.$Store.localRemove("token")},getUser:function(){var t=this;this.$http.get("user_inf").then(function(e){console.log(e);var a=e.data,s=a.user_inf,n=a.code;0===n&&s&&(t.userName=s.username,console.log(t.userName))})},getList:function(){var t=this;this.$http.post("http://jox.ngrok.xiaomiqiu.cn/api/shop_list",{keyword:"热门"}).then(function(e){console.log(e);var a=e.data,s=a.code,n=a.shop_list;a.msg;0===s&&n&&(t.list=n)})},blur:function(){var t=this;setTimeout(function(){t.isFocus=!1},200)},input:function(){}}}),yt=wt,Ct=(a("7578"),Object(d["a"])(yt,gt,bt,!1,null,"7e704818",null)),xt=Ct.exports,kt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("ul",[a("li",[t._v("首页")]),a("li",[t._v("美食地图")]),a("li",[t._v("美食推荐")]),a("li",[t._v("美食排行")])]),a("p",[t._v("© 2019 美食地图有限公司 京ICP证080268号")])])}],Ft={data:function(){return{}},components:{}},St=Ft,Mt=(a("1574"),Object(d["a"])(St,kt,$t,!1,null,"2dde2818",null)),jt=Mt.exports,Ot={components:{MyHeader:xt,Footer:jt}},Et=Ot,It=(a("3e0c"),Object(d["a"])(Et,vt,_t,!1,null,null,null)),Lt=It.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-login"},[t._m(0),a("div",{staticClass:"login-panel"},[t._m(1),a("div",{staticClass:"form"},[t.error?a("h4",{staticClass:"tips"},[a("i"),t._v(t._s(t.error))]):t._e(),t._m(2),a("el-input",{attrs:{"prefix-icon":"profile"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("el-input",{attrs:{"prefix-icon":"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"foot"},[a("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("7天内自动登录")])],1),a("el-button",{staticClass:"btn-login",attrs:{type:"success",size:"mini"},on:{click:t.login}},[t._v("登录")])],1)])])},Pt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-header"},[s("a",{attrs:{href:"/"}},[s("img",{attrs:{src:a("dd88")}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"banner"},[a("img",{attrs:{src:"//s0.meituan.net/bs/file/?f=fe-sso-fs:build/page/static/banner/www.jpg",width:"480",height:"370",alt:"美团网"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("账号登录")])])}],Rt=a("3452"),Tt=a.n(Rt),Ut={data:function(){return{checked:"",username:"",password:"",error:""}},layout:"blank",methods:{login:function(){var t=this;if(""!=this.username)if(""!=this.password){var e=this;this.username&&e.$http.post("login",{username:window.encodeURIComponent(e.username),password:Tt.a.MD5(e.password).toString()}).then(function(a){var s=a.status,n=a.data;200===s?n&&0===n.code?(t.$Store.localSet("token",n.token),location.href="/"):e.error=n.msg:e.error="服务器出错"})}else this.$message.warning("请输入密码");else this.$message.warning("请输入评论")}}},qt=Ut,At=(a("7b49"),Object(d["a"])(qt,Nt,Pt,!1,null,null,null)),zt=At.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-register"},[s("article",{staticClass:"header"},[s("header",[s("img",{attrs:{src:a("dd88")}}),s("span",{staticClass:"login"},[s("em",{staticClass:"bold"},[t._v("已有美食地图账号?")]),s("a",{attrs:{href:"/login"}},[s("el-button",{attrs:{type:"primary",size:"small"}},[t._v("登录")])],1)])])]),s("section",[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"昵称",prop:"name"}},[s("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}}),s("el-button",{attrs:{size:"mini",round:""},on:{click:t.sendMsg}},[t._v("发送验证码")]),s("span",{staticClass:"status"},[t._v(t._s(t.statusMsg))])],1),s("el-form-item",{attrs:{label:"验证码",prop:"code"}},[s("el-input",{attrs:{maxlength:"6"},model:{value:t.ruleForm.code,callback:function(e){t.$set(t.ruleForm,"code",e)},expression:"ruleForm.code"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[s("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.pwd,callback:function(e){t.$set(t.ruleForm,"pwd",e)},expression:"ruleForm.pwd"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"cpwd"}},[s("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.cpwd,callback:function(e){t.$set(t.ruleForm,"cpwd",e)},expression:"ruleForm.cpwd"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.register}},[t._v("同意以下协议并注册")]),s("div",{staticClass:"error"},[t._v(t._s(t.error))])],1),s("el-form-item",[s("a",{staticClass:"f1",attrs:{href:"https://www.meituan.com/about/terms",target:"_blank"}},[t._v("《美食地图用户协议》\n        ")])])],1)],1)])},Gt=[],Ht={layout:"blank",data:function(){var t=this;return{statusMsg:"",error:"",ruleForm:{name:"",code:"",pwd:"",cpwd:"",email:""},rules:{name:[{required:!0,type:"string",message:"请输入昵称",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入邮箱",trigger:"blur"}],pwd:[{required:!0,message:"创建密码",trigger:"blur"}],cpwd:[{required:!0,message:"确认密码",trigger:"blur"},{validator:function(e,a,s){""===a?s(new Error("请再次输入密码")):a!==t.ruleForm.pwd?s(new Error("两次输入密码不一样")):s()},trigger:"blur"}]}}},methods:{sendMsg:function(){var t,e,a=this;return!a.timerid&&(this.$refs["ruleForm"].validateField("name",function(e){t=e}),a.statusMsg="",!t&&(this.$refs["ruleForm"].validateField("email",function(t){e=t}),void(t||e||a.$http.post("code",{receiver:a.ruleForm.email}).then(function(t){var e=t.status,s=t.data;if(200==e&&s&&0===s.code){var n=60;a.statusMsg="验证码已发送,剩余".concat(n--,"秒"),a.timerid=setInterval(function(){a.statusMsg="验证码已发送,剩余".concat(n--,"秒"),0===n&&(clearInterval(a.timerid),a.timerid=null)},1e3)}else a.statusMsg=s.msg}))))},register:function(){var t=this;this.$refs["ruleForm"].validate(function(e){console.log(e),e?t.$http.post("add_user",{username:window.encodeURIComponent(t.ruleForm.name),password:Tt.a.MD5(t.ruleForm.pwd).toString(),email:t.ruleForm.email,code:t.ruleForm.code}).then(function(e){var a=e.status,s=e.data;200===a?s&&0===s.code?location.href="/login":t.error=s.msg:t.error="服务器错误,错误码:".concat(a),setTimeout(function(){t.error=""},1500)}):console.log("验证失败")})}}},Jt=Ht,Bt=(a("b608"),Object(d["a"])(Jt,Wt,Gt,!1,null,null,null)),Dt=Bt.exports;s["default"].use(h["a"]);var Kt=new h["a"]({mode:"history",base:"/",routes:[{path:"/",name:"com",component:Lt,redirect:"/index",children:[{path:"/index",name:"index",component:S},{path:"/products",name:"product",component:q},{path:"/detail",name:"detail",component:ht}]},{path:"/login",name:"login",component:zt},{path:"/register",name:"register",component:Dt}]}),Qt=a("2f62");s["default"].use(Qt["a"]);var Vt=new Qt["a"].Store({state:{},mutations:{},actions:{}}),Xt=(a("a481"),a("795b")),Yt=a.n(Xt),Zt=a("bc3a"),te=a.n(Zt),ee={PORT:8080,URL:"http://jox.ngrok.xiaomiqiu.cn/api/"},ae=ee,se=a("f499"),ne=a.n(se),re={sessionSet:function(t,e){sessionStorage.removeItem(t),sessionStorage.setItem(t,ne()(e))},sessionGet:function(t){return JSON.parse(sessionStorage.getItem(t))},sessionRemove:function(t){sessionStorage.removeItem(t)},localSet:function(t,e){localStorage.removeItem(t),localStorage.setItem(t,ne()(e))},localGet:function(t){return JSON.parse(localStorage.getItem(t))},localRemove:function(t){localStorage.removeItem(t)}},ie=re,oe=te.a.create({timeout:3e4,withCredentials:!0,baseURL:"".concat(ae.URL||"localhost"),headers:{"Content-Type":"application/json; charset=utf-8"}});oe.interceptors.request.use(function(t){return t.headers.token=ie.localGet("token"),t},function(t){return Yt.a.reject(t)}),oe.interceptors.response.use(function(t){var e=t.data.code;return 401===e&&(Object(n["Message"])({message:"登陆信息过期，请重新登陆",type:"error"}),Kt.replace("/login")),t},function(t){return Yt.a.reject(t)});var ce=oe;s["default"].component("vue-ueditor-wrap",o.a),s["default"].config.productionTip=!1,s["default"].use(r.a),s["default"].prototype.$http=ce,s["default"].prototype.$Store=ie,s["default"].prototype.showPreview=!1,new s["default"]({router:Kt,store:Vt,render:function(t){return t(f)}}).$mount("#app")},b34e:function(t,e,a){},b608:function(t,e,a){"use strict";var s=a("e4dc"),n=a.n(s);n.a},dd88:function(t,e,a){t.exports=a.p+"img/logo2.a23dd1b4.png"},e4dc:function(t,e,a){},eca6:function(t,e,a){},f8df:function(t,e,a){"use strict";var s=a("639d"),n=a.n(s);n.a}});
//# sourceMappingURL=index.b18da902.js.map